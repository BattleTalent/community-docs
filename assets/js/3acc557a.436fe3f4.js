"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7443],{1472:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/script-light-saber1-81a0b93fb8051d9e8c02a5013f94bd32.png"},8287:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>f,frontMatter:()=>a,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"complete-scripts/script-lightsaber","title":"LightSaberScript","description":"Makes an object retractable on trigger with trail & sounds.","source":"@site/docs/complete-scripts/script-lightsaber.md","sourceDirName":"complete-scripts","slug":"/complete-scripts/script-lightsaber","permalink":"/community-docs/docs/complete-scripts/script-lightsaber","draft":false,"unlisted":false,"editUrl":"https://github.com/BattleTalent/community-docs/docs/complete-scripts/script-lightsaber.md","tags":[],"version":"current","frontMatter":{"title":"LightSaberScript"},"sidebar":"docs","previous":{"title":"LaserSightScript","permalink":"/community-docs/docs/complete-scripts/script-laser-sight-script"},"next":{"title":"Boss NPC Script","permalink":"/community-docs/docs/complete-scripts/script-npc-boss"}}');var s=n(4848),l=n(8453);const a={title:"LightSaberScript"},c=void 0,o={},i=[{value:"Code",id:"code",level:2},{value:"Component",id:"component",level:2}];function d(e){const t={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,l.RP)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Makes an object retractable on trigger with trail & sounds."}),"\n",(0,s.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-lua",children:"local table = {}\r\n\r\nfunction table:Awake()\r\n    --system will cache up cols, we should do this manual before disabling collider\r\n    self.host.interact:GetCols() \r\n    self.initLocalScale = self.blade.localScale\r\n    self.blade.localScale = UE.Vector3.zero\r\n    self.blade.gameObject:SetActive(false)\r\n    self.host.interact:SetAsNoTrail()\r\n    self.scaleActId = -1\r\n    self.lightUp = false\r\n    self.soundPlayTime = 0\r\n    self.delayScaleAct = -1\r\n    self.isOpen = false\r\nend\r\n\r\nfunction table:UpdateSkill()\r\n\tlocal shootInterval = self.shootInterval or 0.1\r\n\tlocal st = self.shootTime or 0\r\n\tlocal ct = UE.Time.time\r\n\tif ct - st < shootInterval then\r\n\t\treturn\r\n\tend\t\r\n\r\n    self:ToggleSaber()\r\nend\r\n\r\nfunction table:ToggleSaber()\r\n    if (self.isOpen) then\r\n        if (lightUp == false) then\r\n            return\r\n        end\r\n\r\n        self.isOpen = self.isOpen == false;\r\n        self.host.interact.rb.centerOfMass = UE.Vector3(0, 0, 0)\r\n        self.host.interact.rb.mass = 6\r\n        self.saberEndSound:PlaySound()\r\n        self.soundPlayTime = UE.Time.time\r\n        self.trail:StopSmoothly(0.1)\r\n        self:DoScale(false)            \r\n        return\r\n    end\r\n    \r\n    self.isOpen = self.isOpen == false;\r\n    self.saberBeginSound:PlaySound()\r\n    self:DoScale(true)\r\n    self.trail:Activate()\r\n    self.host.interact.rb.centerOfMass = UE.Vector3(0, 0, 0.5)\r\n    self.host.interact.rb.mass = 12\r\nend\r\n\r\nfunction table:DoScale(scaleUp)\r\n    self.lightUp = scaleUp\r\n    local so = self.host.interact:GetStabObject()\r\n    local blade = self.blade\r\n    local startScale = blade.localScale\r\n    \r\n    --local endScale = scaleUp ? initLocalScale : Vector3.zero;\r\n    local endScale = UE.Vector3.zero\r\n    if (scaleUp) then\r\n        endScale = self.initLocalScale\r\n    end\r\n        \r\n    if (scaleUp) then\r\n        blade.gameObject:SetActive(true)\r\n        so.scalingForward = true\r\n    else     \r\n        so:BreakAllStab()\r\n    end\r\n    \r\n    CL.Scheduler.RemoveSchedule(self.scaleActId)\r\n    self.scaleActId = CL.Scheduler.Create(self.host, \r\n        function (sche, t, s)\r\n            self.blade.localScale = UE.Vector3.Lerp(startScale, endScale, CL.EasingEquations.QuadEaseInOut(t, 0, 1, s))\r\n            self.rigidBody.centerOfMass = UE.Vector3(0,0,0);\r\n            if (t>=s) then\r\n                so.scalingForward = false\r\n                if (scaleUp == false) then\r\n                    self.blade.gameObject:SetActive(false)                   \r\n                    so:BreakAllStab()\r\n                end\r\n            end\r\n        end\r\n    , 0, 0.1):\r\n    SetUpdateChannel(CL.Scheduler.UpdateChannel.FixedUpdate).actionId\r\nend\r\n\r\nreturn Class(nil,nil,table)\n"})}),"\n",(0,s.jsx)(t.h2,{id:"component",children:"Component"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Component",src:n(1472).A+"",width:"753",height:"751"})})]})}function f(e={}){const{wrapper:t}={...(0,l.RP)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{RP:()=>l,xA:()=>c});var r=n(6540);const s=r.createContext({});function l(e){const t=r.useContext(s);return r.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const a={};function c({components:e,children:t,disableParentContext:n}){let c;return c=n?"function"==typeof e?e({}):e||a:l(e),r.createElement(s.Provider,{value:c},t)}}}]);