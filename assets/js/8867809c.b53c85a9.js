"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7866],{1899:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"complete-scripts/script-teleport-on-trigger-release","title":"TeleportOnTriggerReleaseScript","description":"1. Hold down the trigger. Throw weapon.","source":"@site/docs/complete-scripts/script-teleport-on-trigger-release.md","sourceDirName":"complete-scripts","slug":"/complete-scripts/script-teleport-on-trigger-release","permalink":"/community-docs/docs/complete-scripts/script-teleport-on-trigger-release","draft":false,"unlisted":false,"editUrl":"https://github.com/BattleTalent/community-docs/docs/complete-scripts/script-teleport-on-trigger-release.md","tags":[],"version":"current","frontMatter":{"title":"TeleportOnTriggerReleaseScript"},"sidebar":"docs","previous":{"title":"TeleportOnExplodeScript","permalink":"/community-docs/docs/complete-scripts/script-teleport-on-collision"},"next":{"title":"Base Projects","permalink":"/community-docs/docs/projects/projects-base-projects"}}');var l=n(4848),s=n(8453);const o={title:"TeleportOnTriggerReleaseScript"},i=void 0,a={},c=[{value:"Code",id:"code",level:2},{value:"Component",id:"component",level:2}];function d(e){const t={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.RP)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsx)(t.li,{children:"Hold down the trigger. Throw weapon."}),"\n",(0,l.jsx)(t.li,{children:"Throw weapon."}),"\n",(0,l.jsx)(t.li,{children:"Teleports player to location of thrown blade when on releasing the trigger."}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-lua",children:'local table = {}\r\n\r\nfunction table:Awake()\r\n    self.isCurrentlyHolding = false\r\n    self.scheId = null\r\n\tself.player = CL.InteractCharacter.PlayerInstance\r\n\tlocal leftHand = self.player.hands[1]\r\n\tlocal rightHand = self.player.hands[0]\r\n\tself.leftTrigger = leftHand.inputs[CL.VRTKInputButton.ButtonType.Trigger]\r\n\tself.rightTrigger = rightHand.inputs[CL.VRTKInputButton.ButtonType.Trigger]\r\nend\r\n\r\nfunction table:UpdateSkill()\r\n    local shootInterval = self.shootInterval or 0.1\r\n    local st = self.shootTime or 0\r\n    local ct = UE.Time.time\r\n    if ct - st < shootInterval then\r\n        return\r\n    end\r\n\r\n    self:PullTrigger()\r\nend\r\n\r\nfunction table:listenForButtonInput()\r\n\tif self.buttonHasBeenPressed then\r\n\t\tif self.hand == "left" and self.leftTrigger.IsPressed == false then\r\n\t\t\tself.buttonHasBeenPressed = false\r\n\t\t\tprint("stopped listening")\r\n\t\t\tself:Teleport()\r\n\t\t\tCL.Scheduler.RemoveSchedule(self.scheId)\r\n\t\t\treturn\r\n\t\tend\r\n\t\tif self.hand == "right" and self.rightTrigger.IsPressed == false then\t\t\r\n\t\t\tself.buttonHasBeenPressed = false\r\n\t\t\tprint("stopped listening")\r\n\t\t\tself:Teleport()\r\n\t\t\tCL.Scheduler.RemoveSchedule(self.scheId)\r\n\t\t\treturn\r\n\t\tend\r\n\tend\r\n\r\n\tif self.isCurrentlyHolding then\r\n\t\tif self.hand == "left" and self.leftTrigger.IsPressed then\r\n\t\t\tself.buttonHasBeenPressed = true\r\n\t\t\treturn\r\n\t\tend\r\n\t\tif self.hand == "right" and self.rightTrigger.IsPressed then\t\t\r\n\t\t\tself.buttonHasBeenPressed = true\r\n\t\t\treturn\r\n\t\tend\r\n\tend\r\nend\r\n\r\nfunction table:Teleport()\r\n\tif self.isCurrentlyHolding then\r\n\t\treturn\r\n\tend\r\n\r\n    if self.effectName then\r\n        CL.EffectMgr.Instance:PlayEffect(self.effectName, self.trans.position, UE.Quaternion.identity)\r\n    end\r\n\r\n\tif self.soundName then\r\n\t\tlocal volume = 0.5\r\n        local randomPitch = (math.random() + math.random(70, 130)) / 100\r\n\t\tCL.AudioMgr.Instance:PlaySoundClip(self.soundName, self.trans.position, false, volume, randomPitch)\r\n\tend\r\n\r\n    self.player:Transport(self.trans.position)\r\nend\r\n\r\nfunction table:OnGrab(a, g)\r\n    if (g) then\r\n\t\tself.isCurrentlyHolding = true\r\n\t\tif(a.attachedHand:GetHandIndex() == 0) then \r\n            self.hand = "right"\r\n        else\r\n            self.hand = "left"\r\n        end\r\n\telse\r\n\t\tself.isCurrentlyHolding = false\r\n\tend\r\nend\r\n\r\nfunction table:PullTrigger()\r\n    print("Instant skill triggered!")\r\n\r\n    local schedulerInterval = 0.02\r\n    local timeBeforeStopping = -1\r\n    local timeBeforeStarting = 0\r\n\r\n    self.scheId = CL.Scheduler.Create({},\r\n    function(sche, t, s)\r\n        self:listenForButtonInput()\r\n    end\r\n    , schedulerInterval, timeBeforeStopping, timeBeforeStarting)\r\n    :SetUpdateChannel(CL.Scheduler.UpdateChannel.FixedUpdate)\r\n    :IgnoreTimeScale(true)\r\n    :SetOnStop(function(sche)\r\n        print("Stopping input listener")\r\n    end).actionId\r\nend\r\n\r\nfunction table:OnDestroy()\r\n    CL.Scheduler.RemoveSchedule(self.scheId)\r\nend\r\n\r\nreturn Class(nil,nil,table)\n'})}),"\n",(0,l.jsx)(t.h2,{id:"component",children:"Component"}),"\n",(0,l.jsxs)(t.p,{children:["Use this script with ",(0,l.jsx)(t.code,{children:"InteractTriggerX"}),". No variables needed."]})]})}function p(e={}){const{wrapper:t}={...(0,s.RP)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{RP:()=>s,xA:()=>i});var r=n(6540);const l=r.createContext({});function s(e){const t=r.useContext(l);return r.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const o={};function i({components:e,children:t,disableParentContext:n}){let i;return i=n?"function"==typeof e?e({}):e||o:s(e),r.createElement(l.Provider,{value:i},t)}}}]);