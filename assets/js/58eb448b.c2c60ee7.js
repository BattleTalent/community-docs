"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6207],{1182:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"complete-scripts/script-laser-sight-script","title":"LaserSightScript","description":"Add a laser to your gun.","source":"@site/docs/complete-scripts/script-laser-sight-script.md","sourceDirName":"complete-scripts","slug":"/complete-scripts/script-laser-sight-script","permalink":"/community-docs/docs/complete-scripts/script-laser-sight-script","draft":false,"unlisted":false,"editUrl":"https://github.com/BattleTalent/community-docs/docs/complete-scripts/script-laser-sight-script.md","tags":[],"version":"current","frontMatter":{"title":"LaserSightScript"},"sidebar":"docs","previous":{"title":"IncreasedDamageScript","permalink":"/community-docs/docs/complete-scripts/script-increased-damage"},"next":{"title":"LightSaberScript","permalink":"/community-docs/docs/complete-scripts/script-lightsaber"}}');var s=n(4848),i=n(8453);const o={title:"LaserSightScript"},c=void 0,a={},l=[{value:"Code",id:"code",level:2},{value:"Component",id:"component",level:2}];function d(e){const t={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.RP)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Add a laser to your gun."}),"\n",(0,s.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-lua",children:'local table = {}\r\n\r\nfunction table:Awake()\r\n    self.scheId = null;\r\n    self.schedulerInterval = 0.01;\r\n    self.timeBeforeStopping = -1;\r\n    self.timeBeforeStarting = 0;\r\nend\r\n\r\nfunction table:Start()\r\n    self.scheId = CL.Scheduler.Create({},\r\n    function(sche, t, s)\r\n\t\tself:Updating()\r\n    end\r\n    , self.schedulerInterval, self.timeBeforeStopping, self.timeBeforeStarting)\r\n    :SetUpdateChannel(CL.Scheduler.UpdateChannel.FixedUpdate)\r\n    :IgnoreTimeScale(true)\r\n    :SetOnStop(function(sche)\r\n        print("Disabling laser sight for gun.")\r\n    end).actionId\r\nend\r\n\r\nfunction table:Updating()\r\n\tlocal fwd = self.raycastStartLocation:TransformDirection(UE.Vector3.forward);\r\n\tlocal isHit, hitInfo = UE.Physics.SphereCast(self.raycastStartLocation.position, 0.02, fwd, 50, CL.LayerDefine.EnvLayerMask.value)\r\n\r\n\tif isHit and hitInfo.distance > 1 then\r\n\t\tself:SetLineToHitLocation(hitInfo);\r\n\t\tdo return end\r\n\tend\r\n\r\n\tself:SetLineToFallbackLocation();\r\nend\r\n\r\nfunction table:SetLineToFallbackLocation()\r\n\tself.laser:SetPosition(0, self.raycastStartLocation.position);\r\n\tself.laser:SetPosition(1, self.laserEndFallbackLocation.position);\r\nend\r\n\r\nfunction table:SetLineToHitLocation(hitInfo)\r\n\tself.laser:SetPosition(0, self.raycastStartLocation.position);\r\n\tself.laser:SetPosition(1, hitInfo.point);\r\nend\r\n\r\nfunction table:OnDestroy()\r\n    CL.Scheduler.RemoveSchedule(self.scheId)\r\nend\r\n\r\nreturn Class(nil,nil,table)\n'})}),"\n",(0,s.jsx)(t.h2,{id:"component",children:"Component"}),"\n",(0,s.jsxs)(t.p,{children:["Can be used on ",(0,s.jsx)(t.code,{children:"InteractTriggerX"}),", but probably also on ",(0,s.jsx)(t.code,{children:"LuaBehaviour"}),".\r\n",(0,s.jsx)(t.img,{alt:"Component",src:n(5739).A+"",width:"772",height:"344"})]})]})}function p(e={}){const{wrapper:t}={...(0,i.RP)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},5739:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/script-laser-sight1-74c9f9fe74ba6b9b3599e252c37063a6.png"},8453:(e,t,n)=>{n.d(t,{RP:()=>i,xA:()=>c});var r=n(6540);const s=r.createContext({});function i(e){const t=r.useContext(s);return r.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const o={};function c({components:e,children:t,disableParentContext:n}){let c;return c=n?"function"==typeof e?e({}):e||o:i(e),r.createElement(s.Provider,{value:c},t)}}}]);