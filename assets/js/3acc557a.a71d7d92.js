"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7443],{7537:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/script-light-saber1-81a0b93fb8051d9e8c02a5013f94bd32.png"},8287:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>f,frontMatter:()=>c,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"complete-scripts/script-lightsaber","title":"LightSaberScript","description":"Makes an object retractable on trigger with trail & sounds.","source":"@site/docs/complete-scripts/script-lightsaber.md","sourceDirName":"complete-scripts","slug":"/complete-scripts/script-lightsaber","permalink":"/community-docs/docs/complete-scripts/script-lightsaber","draft":false,"unlisted":false,"editUrl":"https://github.com/BattleTalent/community-docs/docs/complete-scripts/script-lightsaber.md","tags":[],"version":"current","frontMatter":{"title":"LightSaberScript"},"sidebar":"docs","previous":{"title":"LaserSightScript","permalink":"/community-docs/docs/complete-scripts/script-laser-sight-script"},"next":{"title":"Boss NPC Script","permalink":"/community-docs/docs/complete-scripts/script-npc-boss"}}');var l=n(4848),a=n(8453);const c={title:"LightSaberScript"},o=void 0,i={},r=[{value:"Code",id:"code",level:2},{value:"Component",id:"component",level:2}];function d(e){const t={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,a.RP)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.p,{children:"Makes an object retractable on trigger with trail & sounds."}),"\n",(0,l.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-lua",children:"local table = {}\n\nfunction table:Awake()\n    --system will cache up cols, we should do this manual before disabling collider\n    self.host.interact:GetCols() \n    self.initLocalScale = self.blade.localScale\n    self.blade.localScale = UE.Vector3.zero\n    self.blade.gameObject:SetActive(false)\n    self.host.interact:SetAsNoTrail()\n    self.scaleActId = -1\n    self.lightUp = false\n    self.soundPlayTime = 0\n    self.delayScaleAct = -1\n    self.isOpen = false\nend\n\nfunction table:UpdateSkill()\n\tlocal shootInterval = self.shootInterval or 0.1\n\tlocal st = self.shootTime or 0\n\tlocal ct = UE.Time.time\n\tif ct - st < shootInterval then\n\t\treturn\n\tend\t\n\n    self:ToggleSaber()\nend\n\nfunction table:ToggleSaber()\n    if (self.isOpen) then\n        if (lightUp == false) then\n            return\n        end\n\n        self.isOpen = self.isOpen == false;\n        self.host.interact.rb.centerOfMass = UE.Vector3(0, 0, 0)\n        self.host.interact.rb.mass = 6\n        self.saberEndSound:PlaySound()\n        self.soundPlayTime = UE.Time.time\n        self.trail:StopSmoothly(0.1)\n        self:DoScale(false)            \n        return\n    end\n    \n    self.isOpen = self.isOpen == false;\n    self.saberBeginSound:PlaySound()\n    self:DoScale(true)\n    self.trail:Activate()\n    self.host.interact.rb.centerOfMass = UE.Vector3(0, 0, 0.5)\n    self.host.interact.rb.mass = 12\nend\n\nfunction table:DoScale(scaleUp)\n    self.lightUp = scaleUp\n    local so = self.host.interact:GetStabObject()\n    local blade = self.blade\n    local startScale = blade.localScale\n    \n    --local endScale = scaleUp ? initLocalScale : Vector3.zero;\n    local endScale = UE.Vector3.zero\n    if (scaleUp) then\n        endScale = self.initLocalScale\n    end\n        \n    if (scaleUp) then\n        blade.gameObject:SetActive(true)\n        so.scalingForward = true\n    else     \n        so:BreakAllStab()\n    end\n    \n    CL.Scheduler.RemoveSchedule(self.scaleActId)\n    self.scaleActId = CL.Scheduler.Create(self.host, \n        function (sche, t, s)\n            self.blade.localScale = UE.Vector3.Lerp(startScale, endScale, CL.EasingEquations.QuadEaseInOut(t, 0, 1, s))\n            self.rigidBody.centerOfMass = UE.Vector3(0,0,0);\n            if (t>=s) then\n                so.scalingForward = false\n                if (scaleUp == false) then\n                    self.blade.gameObject:SetActive(false)                   \n                    so:BreakAllStab()\n                end\n            end\n        end\n    , 0, 0.1):\n    SetUpdateChannel(CL.Scheduler.UpdateChannel.FixedUpdate).actionId\nend\n\nreturn Class(nil,nil,table)\n"})}),"\n",(0,l.jsx)(t.h2,{id:"component",children:"Component"}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.img,{alt:"Component",src:n(7537).A+"",width:"753",height:"751"})})]})}function f(e={}){const{wrapper:t}={...(0,a.RP)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{RP:()=>a,xA:()=>o});var s=n(6540);const l=s.createContext({});function a(e){const t=s.useContext(l);return s.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const c={};function o({components:e,children:t,disableParentContext:n}){let o;return o=n?"function"==typeof e?e({}):e||c:a(e),s.createElement(l.Provider,{value:o},t)}}}]);