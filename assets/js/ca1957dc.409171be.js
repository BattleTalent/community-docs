"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7986],{821:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/script-custom-collision-effect-04bcb65bfa5bc91f2d02835bfe041c44.png"},6451:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"complete-scripts/script-custom-collision-effect-script","title":"CustomCollisionEffectScript","description":"CollisionEffect, but with custom sounds & effects!","source":"@site/docs/complete-scripts/script-custom-collision-effect-script.md","sourceDirName":"complete-scripts","slug":"/complete-scripts/script-custom-collision-effect-script","permalink":"/community-docs/docs/complete-scripts/script-custom-collision-effect-script","draft":false,"unlisted":false,"editUrl":"https://github.com/BattleTalent/community-docs/docs/complete-scripts/script-custom-collision-effect-script.md","tags":[],"version":"current","frontMatter":{"title":"CustomCollisionEffectScript"},"sidebar":"docs","previous":{"title":"BowScript","permalink":"/community-docs/docs/complete-scripts/script-bow-script"},"next":{"title":"DashOnTriggerScript","permalink":"/community-docs/docs/complete-scripts/script-dash-on-trigger"}}');var r=t(4848),i=t(8453);const s={title:"CustomCollisionEffectScript"},c=void 0,l={},d=[{value:"Code",id:"code",level:2},{value:"Component",id:"component",level:2},{value:"FAQ",id:"faq",level:2},{value:"What&#39;s the <code>col0</code> variable?",id:"whats-the-col0-variable",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,i.RP)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"CollisionEffect, but with custom sounds & effects!"}),"\n",(0,r.jsx)(n.h2,{id:"code",children:"Code"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'local table = {\r\n    sqrSpeed = 2,\r\n}\r\n\r\nfunction table:OnColliderEnter(collision)\r\n    -- return when collision was with self\r\n\r\n    local hand = self.interactTrigger.interact:GetPrimaryHand()\r\n    if hand and collision.gameObject.transform.root == hand.character.trans.root then\r\n        return\r\n    end\r\n\r\n    local pu = CL.PhysicsUnit.GetPhysicsUnitTopDown(collision.collider)\r\n    if pu ~= nil and pu.unitType == CL.Tagger.Tag.PlayerRole then\r\n        return\r\n    end\r\n\r\n    -- return when collision was slow\r\n\r\n    if collision.relativeVelocity.sqrMagnitude < self.sqrSpeed then\r\n        return\r\n    end\r\n    \r\n    -- return when collider wasnt in list\r\n\r\n    local ct = collision:GetContact(0)\r\n    local colliderIsInList = false\r\n    local collider_index = 0\r\n    while self["col" .. collider_index] do\r\n        if self["col" .. collider_index] == ct.thisCollider then\r\n            colliderIsInList = true\r\n            break\r\n        end\r\n        collider_index = collider_index + 1\r\n    end\r\n    if not colliderIsInList then\r\n        return\r\n    end\r\n\r\n    -- collide!\r\n\r\n    local pos = collision.collider:ClosestPoint(ct.point)\r\n    pos.y = pos.y + 0.05\r\n\r\n    if self.effectName then\r\n        CL.EffectMgr.Instance:PlayEffect(self.effectName, pos, UE.Quaternion.identity)\r\n    end\r\n\r\n    local soundNames = {}   \r\n    local sound_index = 0\r\n    while self["soundName" .. sound_index] do\r\n        soundNames[sound_index] = self["soundName" .. sound_index]\r\n        sound_index = sound_index + 1\r\n    end\r\n\r\n    if soundNames[0] then\r\n        local volume = 0.5\r\n        local randomPitch = (math.random() + math.random(70, 130)) / 100\r\n        CL.AudioMgr.Instance:PlaySoundClip(soundNames, pos, false, volume, randomPitch)\r\n    end\r\nend\r\n\r\nreturn Class(nil,nil,table)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"component",children:"Component"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Component",src:t(821).A+"",width:"732",height:"632"})}),"\n",(0,r.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,r.jsxs)(n.h3,{id:"whats-the-col0-variable",children:["What's the ",(0,r.jsx)(n.code,{children:"col0"})," variable?"]}),"\n",(0,r.jsxs)(n.p,{children:["You can add variables to this component to add the collision detection. For example; the above component will only be used on the ",(0,r.jsx)(n.code,{children:"col0"})," collider, but you could also add a ",(0,r.jsx)(n.code,{children:"col1"}),", ",(0,r.jsx)(n.code,{children:"col2"}),", and so on."]})]})}function u(e={}){const{wrapper:n}={...(0,i.RP)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{RP:()=>i,xA:()=>c});var o=t(6540);const r=o.createContext({});function i(e){const n=o.useContext(r);return o.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const s={};function c({components:e,children:n,disableParentContext:t}){let c;return c=t?"function"==typeof e?e({}):e||s:i(e),o.createElement(r.Provider,{value:c},n)}}}]);