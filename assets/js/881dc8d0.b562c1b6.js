"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7373],{4176:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>i});const l=JSON.parse('{"id":"complete-scripts/script-retractable","title":"RetractableScript","description":"Makes an object retractable with sounds.","source":"@site/docs/complete-scripts/script-retractable.md","sourceDirName":"complete-scripts","slug":"/complete-scripts/script-retractable","permalink":"/community-docs/docs/complete-scripts/script-retractable","draft":false,"unlisted":false,"editUrl":"https://github.com/BattleTalent/community-docs/docs/complete-scripts/script-retractable.md","tags":[],"version":"current","frontMatter":{"title":"RetractableScript"},"sidebar":"docs","previous":{"title":"ParticlesOnTriggerScript","permalink":"/community-docs/docs/complete-scripts/script-particles-on-trigger"},"next":{"title":"RoundSlicingScript","permalink":"/community-docs/docs/complete-scripts/script-round-slicing"}}');var s=n(4848),c=n(8453);const a={title:"RetractableScript"},o=void 0,r={},i=[{value:"Code",id:"code",level:2},{value:"Component",id:"component",level:2}];function d(e){const t={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,c.RP)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Makes an object retractable with sounds."}),"\n",(0,s.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-lua",children:"local table = {}\n\nfunction table:Awake()\n    --system will cache up cols, we should do this manual before disabling collider\n    self.host.interact:GetCols() \n    self.initLocalScale = self.blade.localScale\n    self.blade.localScale = UE.Vector3.zero\n    self.blade.gameObject:SetActive(false)\n    self.host.interact:SetAsNoTrail()\n    self.scaleActId = -1\n    self.lightUp = false\n    self.soundPlayTime = 0\n    self.delayScaleAct = -1\n    self.isOpen = false\nend\n\nfunction table:UpdateSkill()\n\tlocal shootInterval = self.shootInterval or 0.1\n\tlocal st = self.shootTime or 0\n\tlocal ct = UE.Time.time\n\tif ct - st < shootInterval then\n\t\treturn\n\tend\t\n\n    self:ToggleRetractable()\nend\n\nfunction table:ToggleRetractable()\n    if (self.isOpen) then\n        if (lightUp == false) then\n            return\n        end\n\n        self.isOpen = self.isOpen == false;\n        self.host.interact.rb.centerOfMass = UE.Vector3(0, 0, 0)\n        self.host.interact.rb.mass = 6\n        self.saberEndSound:PlaySound()\n        self.soundPlayTime = UE.Time.time\n        self:DoScale(false)            \n        return\n    end\n    \n    self.isOpen = self.isOpen == false;\n    self.saberBeginSound:PlaySound()\n    self:DoScale(true)\n    self.host.interact.rb.centerOfMass = UE.Vector3(0, 0, 0.5)\n    self.host.interact.rb.mass = 12\nend\n\nfunction table:DoScale(scaleUp)\n    self.lightUp = scaleUp\n    local so = self.host.interact:GetStabObject()\n    local blade = self.blade\n    local startScale = blade.localScale\n    \n    --local endScale = scaleUp ? initLocalScale : Vector3.zero;\n    local endScale = UE.Vector3.zero\n    if (scaleUp) then\n        endScale = self.initLocalScale\n    end\n        \n    if (scaleUp) then\n        blade.gameObject:SetActive(true)\n        so.scalingForward = true\n    else     \n        so:BreakAllStab()\n    end\n    \n    CL.Scheduler.RemoveSchedule(self.scaleActId)\n    self.scaleActId = CL.Scheduler.Create(self.host, \n        function (sche, t, s)\n            self.blade.localScale = UE.Vector3.Lerp(startScale, endScale, CL.EasingEquations.QuadEaseInOut(t, 0, 1, s))\n            self.rigidBody.centerOfMass = UE.Vector3(0,0,0);\n            if (t>=s) then\n                so.scalingForward = false\n                if (scaleUp == false) then\n                    self.blade.gameObject:SetActive(false)                   \n                    so:BreakAllStab()\n                end\n            end\n        end\n    , 0, 0.1):\n    SetUpdateChannel(CL.Scheduler.UpdateChannel.FixedUpdate).actionId\nend\n\nreturn Class(nil,nil,table)\n"})}),"\n",(0,s.jsx)(t.h2,{id:"component",children:"Component"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Component",src:n(9196).A+"",width:"728",height:"674"})})]})}function p(e={}){const{wrapper:t}={...(0,c.RP)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{RP:()=>c,xA:()=>o});var l=n(6540);const s=l.createContext({});function c(e){const t=l.useContext(s);return l.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const a={};function o({components:e,children:t,disableParentContext:n}){let o;return o=n?"function"==typeof e?e({}):e||a:c(e),l.createElement(s.Provider,{value:o},t)}},9196:(e,t,n)=>{n.d(t,{A:()=>l});const l=n.p+"assets/images/script-retractable1-bd3e7c29cc2b533d6818ac662be76352.png"}}]);