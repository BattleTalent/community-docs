"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6207],{1182:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"complete-scripts/script-laser-sight-script","title":"LaserSightScript","description":"Add a laser to your gun.","source":"@site/docs/complete-scripts/script-laser-sight-script.md","sourceDirName":"complete-scripts","slug":"/complete-scripts/script-laser-sight-script","permalink":"/community-docs/docs/complete-scripts/script-laser-sight-script","draft":false,"unlisted":false,"editUrl":"https://github.com/BattleTalent/community-docs/docs/complete-scripts/script-laser-sight-script.md","tags":[],"version":"current","frontMatter":{"title":"LaserSightScript"},"sidebar":"docs","previous":{"title":"IncreasedDamageScript","permalink":"/community-docs/docs/complete-scripts/script-increased-damage"},"next":{"title":"LightSaberScript","permalink":"/community-docs/docs/complete-scripts/script-lightsaber"}}');var i=n(4848),o=n(8453);const r={title:"LaserSightScript"},c=void 0,a={},l=[{value:"Code",id:"code",level:2},{value:"Component",id:"component",level:2}];function d(e){const t={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,o.RP)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Add a laser to your gun."}),"\n",(0,i.jsx)(t.h2,{id:"code",children:"Code"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-lua",children:'local table = {}\n\nfunction table:Awake()\n    self.scheId = null;\n    self.schedulerInterval = 0.01;\n    self.timeBeforeStopping = -1;\n    self.timeBeforeStarting = 0;\nend\n\nfunction table:Start()\n    self.scheId = CL.Scheduler.Create({},\n    function(sche, t, s)\n\t\tself:Updating()\n    end\n    , self.schedulerInterval, self.timeBeforeStopping, self.timeBeforeStarting)\n    :SetUpdateChannel(CL.Scheduler.UpdateChannel.FixedUpdate)\n    :IgnoreTimeScale(true)\n    :SetOnStop(function(sche)\n        print("Disabling laser sight for gun.")\n    end).actionId\nend\n\nfunction table:Updating()\n\tlocal fwd = self.raycastStartLocation:TransformDirection(UE.Vector3.forward);\n\tlocal isHit, hitInfo = UE.Physics.SphereCast(self.raycastStartLocation.position, 0.02, fwd, 50, CL.LayerDefine.EnvLayerMask.value)\n\n\tif isHit and hitInfo.distance > 1 then\n\t\tself:SetLineToHitLocation(hitInfo);\n\t\tdo return end\n\tend\n\n\tself:SetLineToFallbackLocation();\nend\n\nfunction table:SetLineToFallbackLocation()\n\tself.laser:SetPosition(0, self.raycastStartLocation.position);\n\tself.laser:SetPosition(1, self.laserEndFallbackLocation.position);\nend\n\nfunction table:SetLineToHitLocation(hitInfo)\n\tself.laser:SetPosition(0, self.raycastStartLocation.position);\n\tself.laser:SetPosition(1, hitInfo.point);\nend\n\nfunction table:OnDestroy()\n    CL.Scheduler.RemoveSchedule(self.scheId)\nend\n\nreturn Class(nil,nil,table)\n'})}),"\n",(0,i.jsx)(t.h2,{id:"component",children:"Component"}),"\n",(0,i.jsxs)(t.p,{children:["Can be used on ",(0,i.jsx)(t.code,{children:"InteractTriggerX"}),", but probably also on ",(0,i.jsx)(t.code,{children:"LuaBehaviour"}),".\n",(0,i.jsx)(t.img,{alt:"Component",src:n(8918).A+"",width:"772",height:"344"})]})]})}function p(e={}){const{wrapper:t}={...(0,o.RP)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{RP:()=>o,xA:()=>c});var s=n(6540);const i=s.createContext({});function o(e){const t=s.useContext(i);return s.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const r={};function c({components:e,children:t,disableParentContext:n}){let c;return c=n?"function"==typeof e?e({}):e||r:o(e),s.createElement(i.Provider,{value:c},t)}},8918:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/script-laser-sight1-74c9f9fe74ba6b9b3599e252c37063a6.png"}}]);